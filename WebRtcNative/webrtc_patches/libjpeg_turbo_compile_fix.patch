diff --git a/turbojpeg.c b/turbojpeg.c
index f51df78..bb358a5 100644
--- a/turbojpeg.c
+++ b/turbojpeg.c
@@ -175,8 +175,9 @@ static int setCompDefaults(struct jpeg_compress_struct *cinfo,
 	int pixelFormat, int subsamp, int jpegQual, int flags)
 {
 	int retval=0;
+#ifndef NO_GETENV
 	char *env=NULL;
-
+#endif
 	switch(pixelFormat)
 	{
 		case TJPF_GRAY:
